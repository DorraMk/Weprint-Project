"use strict";var __decorate=this&&this.__decorate||function(e,t,o,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,s);else for(var i=e.length-1;0<=i;i--)(n=e[i])&&(a=(r<3?n(a):3<r?n(t,o,a):n(t,o))||a);return 3<r&&a&&Object.defineProperty(t,o,a),a};exports.__esModule=!0;var http_1=require("@angular/common/http"),core_1=require("@angular/core"),ImpressionComponent=function(){function e(e){this.fileService=e,this.filenames=[],this.fileStatus={status:"",requestType:"",percent:0}}return e.prototype.onUploadFiles=function(e){for(var t=this,o=new FormData,s=0,n=e;s<n.length;s++){var r=n[s];o.append("files",r,r.name)}this.fileService.upload(o).subscribe(function(e){console.log(e),t.resportProgress(e)},function(e){console.log(e)})},e.prototype.onDownloadFile=function(e){var t=this;this.fileService.download(e).subscribe(function(e){console.log(e),t.resportProgress(e)},function(e){console.log(e)})},e.prototype.resportProgress=function(e){switch(e.type){case http_1.HttpEventType.UploadProgress:this.updateStatus(e.loaded,e.total,"Uploading... ");break;case http_1.HttpEventType.DownloadProgress:this.updateStatus(e.loaded,e.total,"Downloading... ");break;case http_1.HttpEventType.ResponseHeader:console.log("Header returned",e);break;case http_1.HttpEventType.Response:if(e.body instanceof Array){this.fileStatus.status="done";for(var t=0,o=e.body;t<o.length;t++){var s=o[t];this.filenames.unshift(s)}}else saveAs(new File([e.body],e.headers.get("File-Name"),{type:e.headers.get("Content-Type")+";charset=utf-8"}));this.fileStatus.status="done";break;default:console.log(e)}},e.prototype.updateStatus=function(e,t,o){this.fileStatus.status="progress",this.fileStatus.requestType=o,this.fileStatus.percent=Math.round(100*e/t)},e=__decorate([core_1.Component({selector:"app-impression",templateUrl:"./impression.component.html",styleUrls:["./impression.component.css"]})],e)}();function saveAs(e){throw new Error("Function not implemented.")}exports.ImpressionComponent=ImpressionComponent;
//# sourceMappingURL=impression.component.min.js.map
